upstream localhost {
  ip_hash;
  server unix:///app/tmp/sockets/blog.sock max_fails=1 fail_timeout=15s;
}

server {
        #listen   80; ## listen for ipv4; this line is default and implied
        #listen   [::]:80 default_server ipv6only=on; ## listen for ipv6

        root /app;
        index index.html index.htm;

        # Make site accessible from http://localhost/
        server_name localhost;

        location /assets/  {
          gzip_static on;
          expires max;
          add_header Cache-Control public;
          access_log /dev/null;
          root /home/palmsalami/www/palmsalami.com/current/public;
        }

        location / {
          proxy_pass http://localhost;
          proxy_set_header HOST $host;
          proxy_set_header X-Real-IP $remote_addr;
          proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }

}

